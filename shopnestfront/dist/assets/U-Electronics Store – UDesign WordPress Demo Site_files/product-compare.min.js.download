"use strict";window.theme||(window.theme={}),function(e){theme.productCompare=function(){function a(e,a=!0){var t=e.html(),o=a?1:-1;t=t.replace(/[^0-9]/,""),(t=parseInt(t)+o)>=0&&t<=alpha_vars.compare_limit&&e.html(t)}e(document).on("click",".product a.compare:not(.added)",(function(a){a.preventDefault();var t=e(this),o={action:"alpha_add_to_compare",id:t.data("product_id"),minicompare:e(".header .compare-dropdown").length?e(".header .compare-dropdown").data("minicompare-type"):"",_wpnonce:alpha_vars.nonce};theme.doLoading(t,"small"),t.closest(".product").css("pointer-events","all"),theme.$body.css("pointer-events","none"),e.ajax({type:"post",url:alpha_vars.ajax_url,data:o,dataType:"json",success:function(a){if(theme.endLoading(t),t.closest(".product").css("pointer-events",""),theme.$body.css("pointer-events",""),void 0!==a.count){var o=e(".header .compare-dropdown .widget_compare_content");o.length&&o.html(e(a.minicompare).find(".widget_compare_content").html());var r=o.closest(".dropdown-box");r.length&&(o.find(".mini-basket-empty").length?r.hasClass("empty")||r.addClass("empty"):r.hasClass("empty")&&r.removeClass("empty")),e(document).trigger("added_to_compare",a.popup_template),t.addClass("added"),t.attr("href",a.url);var p=t.children("i");p.length&&t.attr("data-added-icon")&&p.attr("class",t.attr("data-added-icon"));var d=t.text();d&&(p.length?t.html(t.html().replace(d,t.attr("data-added-text"))):t.text(t.attr("data-added-text"))),e("[data-product_id='"+t.data("product_id")+"'].compare").addClass("added").attr("href",a.url),a.shift_product&&e(".product.post-"+a.shift_product).length&&e(".product.post-"+a.shift_product).find(".compare.added").removeClass("added").attr("href","#")}}})})).on("click",".remove_from_compare",(function(t){t.preventDefault();var o=e(this),r={action:"alpha_remove_from_compare",id:o.data("product_id"),_wpnonce:alpha_vars.nonce};theme.doLoading(o.parent(),"small"),e.ajax({type:"post",url:alpha_vars.ajax_url,data:r,dataType:"json",success:function(t){void 0!==t.count&&(theme.endLoading(o.parent()),o.closest(".compare-popup").length?(o.closest("li").empty(),a(e(".compare-popup .compare-heading mark"),!1)):void 0!==t.compare_table&&o.closest(".alpha-compare-table").replaceWith(t.compare_table),e(document).trigger("removed_from_compare",r.id))}})})).on("click",".compare-popup-overlay",(function(){e(".page-wrapper > .compare-popup").removeClass("show")})).on("click",".alpha-compare-table .to-left, .alpha-compare-table .to-right",(function(a){if(a.preventDefault(),!e(this).closest(".compare-basic-info").find(".d-loading").length){var t=e(this),o=t.closest(".compare-value").index()-1;if(!(!theme.$body.hasClass("rtl")&&t.closest(".compare-col").hasClass("last-col")&&t.hasClass("to-right")||theme.$body.hasClass("rtl")&&t.closest(".compare-col").hasClass("last-col")&&t.hasClass("to-left"))){var r=theme.$body.hasClass("rtl")?"right":"left";theme.$body.hasClass("rtl");e(this).closest(".alpha-compare-table").find(".compare-row").each((function(){var a=e(this).children(".compare-value").eq(o),p=t.hasClass("to-"+r)?a.prev():a.next(),d=t.closest(".compare-col").innerWidth()/t.closest(".compare-row").innerWidth()*100,s=(t.hasClass("to-"+r)?"-":"")+d+"%",l=(t.hasClass("to-"+r)?"":"-")+d+"%";p.hasClass("compare-field")||(a.animate(theme.$body.hasClass("rtl")?{right:s}:{left:s},200,(function(){a.css(r,""),t.hasClass("to-"+r)?a.after(p):a.before(p)})),p.animate(theme.$body.hasClass("rtl")?{right:l}:{left:l},200,(function(){p.css(r,"")})),setTimeout((function(){(p.hasClass("last-col")||a.hasClass("last-col"))&&(a.toggleClass("last-col"),p.toggleClass("last-col"))}),200))}))}}})).on("click",".compare-clean",(function(a){a.preventDefault(),e(".remove_from_compare").each((function(){var a=e(this).data("product_id"),t=e('.compare[data-product_id="'+a+'"]');t.removeClass("added");var o=t.children("i");o.length&&t.attr("data-add-icon")&&o.attr("class",t.attr("data-add-icon"));var r=t.text();r&&(o.length?t.html(t.html().replace(r,t.attr("title"))):t.text(t.attr("title")))})),e(".compare-popup li").empty(),e(".compare-popup .compare-heading mark").text("0"),e.post(alpha_vars.ajax_url,{action:"alpha_clean_compare"}),e(".header .compare-dropdown .compare-count").html("0")})).on("added_to_compare",(function(t,o){if(o)if("offcanvas"==alpha_vars.compare_popup_type){var r=e(".page-wrapper > .compare-popup");r.length||(e(".page-wrapper").append('<div class="compare-popup"></div><div class="compare-popup-overlay"></div>'),r=e(".page-wrapper > .compare-popup")),r.html(o),theme.slider(".compare-popup .slider-wrapper",{spaceBetween:30,breakpoints:{576:{slidesPerView:3,spaceBetween:10},768:{slidesPerView:4},992:{slidesPerView:3.5},1300:{slidesPerView:4}},scrollbar:{el:".slider-scrollbar",dragClass:"slider-scrollbar-drag",draggable:!0}}),theme.requestTimeout((function(){r.addClass("show")}),60)}else theme.minipopup.open({content:o});if(e(".header .compare-dropdown").length){var p=e(".header .compare-dropdown").find(".compare-count");p.length&&a(p)}})).on("removed_from_compare",(function(t,o){var r=e('.compare[data-product_id="'+o+'"]');r.removeClass("added");var p=r.children("i");p.length&&r.attr("data-add-icon")&&p.attr("class",r.attr("data-add-icon"));var d=r.text();if(d&&(p.length?r.html(r.html().replace(d,r.attr("title"))):r.text(r.attr("title"))),e(".header .compare-dropdown").length){var s=e(".header .compare-dropdown").find(".compare-count"),l=e(".header .compare-dropdown");s.length&&a(s,!1),l.find(".mini-item").length>1?(l.find('.remove_from_compare[data-product_id="'+o+'"]').closest(".mini-item").remove(),l.find(".dropdown-box").hasClass("empty")&&l.find(".dropdown-box").removeClass("empty")):(l.find(".widget_compare_content").html(e("script.alpha-minicompare-no-item-html").html()),l.find(".dropdown-box").hasClass("empty")||l.find(".dropdown-box").addClass("empty"))}}))},e(window).on("alpha_complete",theme.productCompare)}(jQuery);